
//Por : Feyman Eduardo Joya Serna

CREATE TABLE AGR_VENADILLO.CLIENTES(
ID_CLIENTE SERIAL,
DOCUMENTO VARCHAR(15),
NOMBRE1 VARCHAR (20),
NOMBRE2 VARCHAR (20),
APELLIDO1 VARCHAR (20),
APELLIDO2 VARCHAR (20),
TELEFONO VARCHAR (20),
CONSTRAINT PK_CLIENTES PRIMARY KEY (ID_CLIENTE),
CONSTRAINT NN_DOCUMENTO CHECK (DOCUMENTO IS NOT NULL),
CONSTRAINT NN_NOMBRE1 CHECK (NOMBRE1 IS NOT NULL),
CONSTRAINT NN_APELLIDO CHECK (APELLIDO1 IS NOT NULL)
)

CREATE TABLE AGR_VENADILLO.PROVEEDOR(
ID_PROVEEDOR SERIAL,
NIT VARCHAR (20),
NOMBRE_PROV VARCHAR (50),
DIRECCION_PROV VARCHAR (40),
TELEFONO_PROV VARCHAR (15),
CONSTRAINT PK_PROVEEDOR PRIMARY KEY (ID_PROVEEDOR),
CONSTRAINT NN_NIT CHECK (NIT IS NOT NULL),
CONSTRAINT NN_NOMBRE CHECK (NOMBRE_PROV IS NOT NULL),
CONSTRAINT NN_TELEFONO CHECK (TELEFONO_PROV IS NOT NULL)	
)

CREATE TABLE AGR_VENADILLO.ADMINISTRADOR(
ID_ADMINISTRADOR SERIAL,
NOMBRE1_AD VARCHAR (20),
NOMBRE2_AD VARCHAR (20),
APELLIDO1_AD VARCHAR (20),
APELLIDO2_AD VARCHAR (20),
TELEFONO_AD VARCHAR (15),
CONSTRAINT PK_ADMINISTRADOR PRIMARY KEY (ID_ADMINISTRADOR),
CONSTRAINT NN_NOMBRE CHECK (NOMBRE1_AD IS NOT NULL),
CONSTRAINT NN_APELLIDO CHECK (APELLIDO1_AD IS NOT NULL)
)

CREATE TABLE AGR_VENADILLO.PRODUCTO(
ID_PRODUCTO SERIAL,
ID_ADMINISTRADOR INTEGER,
ID_PROVEEDOR INTEGER,
CODIGO_PRO VARCHAR (4),
NOMBRE_PRO VARCHAR (50),
STOCK_PRO INTEGER,
PRECIOUNIT_PRO INTEGER,
CONSTRAINT PK_PRODUCTO PRIMARY KEY (ID_PRODUCTO),
CONSTRAINT NN_CODIGO CHECK (CODIGO_PRO IS NOT NULL),
CONSTRAINT NN_NOMBRE CHECK (NOMBRE_PRO IS NOT NULL),
CONSTRAINT FK_ADMINISTRADOR_PRODUCTO FOREIGN KEY (ID_ADMINISTRADOR)
REFERENCES AGR_VENADILLO.ADMINISTRADOR (ID_ADMINISTRADOR),
CONSTRAINT FK_PROVEEDOR_PRODUCTO FOREIGN KEY (ID_PROVEEDOR)
REFERENCES AGR_VENADILLO.PROVEEDOR (ID_PROVEEDOR)
)

CREATE TABLE AGR_VENADILLO.EMPLEADO(
ID_EMPLEADO SERIAL,
DOCUMENTO_EMP VARCHAR (15),
NOMBRE1_EMP VARCHAR (20),
NOMBRE2_EMP VARCHAR (20),
APELLIDO1_EMP VARCHAR (20),
APELLIDO2_EMP VARCHAR (20),
ESTADO_EMP CHAR (1),
CARGO_EMP VARCHAR (20),
TELEFONO_EMP VARCHAR (15),
CONSTRAINT PK_EMPLEADO PRIMARY KEY (ID_EMPLEADO),
CONSTRAINT NN_NOMBRE CHECK (NOMBRE1_EMP IS NOT NULL),
CONSTRAINT NN_APELLIDO CHECK (APELLIDO1_EMP IS NOT NULL),
CONSTRAINT NN_DOCUMENTO CHECK (DOCUMENTO_EMP IS NOT NULL)
)

CREATE TABLE AGR_VENADILLO.FACTURA(
ID_FACTURA SERIAL,
CONSECUTIVO INTEGER,
ID_CLIENTE INTEGER,
ID_EMPLEADO INTEGER,
TOTAL INTEGER,
FECHA DATE,
CONSTRAINT PK_FACTURA PRIMARY KEY (ID_FACTURA),
CONSTRAINT NN_CONSECUTIVO CHECK (CONSECUTIVO IS NOT NULL),
CONSTRAINT FK_CLIENTE_FACTURA FOREIGN KEY (ID_CLIENTE)
REFERENCES AGR_VENADILLO.CLIENTES (ID_CLIENTE),
CONSTRAINT FK_EMPLEADO_FACTURA FOREIGN KEY (ID_EMPLEADO)
REFERENCES AGR_VENADILLO.EMPLEADO (ID_EMPLEADO)
)

CREATE TABLE AGR_VENADILLO.DETALLE(
ID_FACTURA INTEGER,
ID_PRODUCTO INTEGER,
CANTIDAD INTEGER,
SUBTOTAL INTEGER,
CONSTRAINT PK_FACTURA_PRODUCTO PRIMARY KEY (ID_FACTURA,ID_PRODUCTO),
CONSTRAINT FK_FACTURA_DETALLE FOREIGN KEY (ID_FACTURA)
REFERENCES AGR_VENADILLO.FACTURA (ID_FACTURA),
CONSTRAINT FK_PRODUCTO_DETALLE FOREIGN KEY (ID_PRODUCTO)
REFERENCES AGR_VENADILLO.PRODUCTO (ID_PRODUCTO)
)

CREATE TABLE AGR_VENADILLO.PRODUCTO_PROVEEDOR(
ID_PRODUC_PROVEEDOR SERIAL,
ID_PROVEEDOR INTEGER,
ID_PRODUCTO INTEGER,
TOTAL INTEGER,
FECHA DATE,
CONSTRAINT PK_PRODUC_PROVEEDOR PRIMARY KEY (ID_PRODUC_PROVEEDOR),
CONSTRAINT FK_PROVEEDOR_PRODU_PROVEE FOREIGN KEY (ID_PROVEEDOR)
REFERENCES AGR_VENADILLO.PROVEEDOR (ID_PROVEEDOR),
CONSTRAINT FK_PRODUCTO_PRODU_PROVEE FOREIGN KEY (ID_PRODUCTO)
REFERENCES AGR_VENADILLO.PRODUCTO (ID_PRODUCTO)
)